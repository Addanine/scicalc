<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CalcLabs: SciCalc</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='script.js') }}"></script>

</head>
<body id="body">
    <div class="calculator" id="calculator">
        <div class="display" id="display">0</div>
        <div class="buttons">
            <button class="button col-span-2 bg-red-500" onclick="clearDisplay()">C</button>
            <button class="button bg-yellow-500" onclick="deleteLast()">âŒ«</button>
            <button class="button bg-yellow-500" onclick="appendOperator('/')">/</button>
            <button class="button" onclick="appendCharacter('7')">7</button>
            <button class="button" onclick="appendCharacter('8')">8</button>
            <button class="button" onclick="appendCharacter('9')">9</button>
            <button class="button bg-yellow-500" onclick="appendOperator('*')">*</button>
            <button class="button" onclick="appendCharacter('4')">4</button>
            <button class="button" onclick="appendCharacter('5')">5</button>
            <button class="button" onclick="appendCharacter('6')">6</button>
            <button class="button bg-yellow-500" onclick="appendOperator('-')">-</button>
            <button class="button" onclick="appendCharacter('1')">1</button>
            <button class="button" onclick="appendCharacter('2')">2</button>
            <button class="button" onclick="appendCharacter('3')">3</button>
            <button class="button bg-yellow-500" onclick="appendOperator('+')">+</button>
            <button class="button col-span-2" onclick="appendCharacter('0')">0</button>
            <button class="button" onclick="appendCharacter('.')">.</button>
            <button class="button bg-green-500" onclick="calculate()">=</button>
            <button class="button" onclick="appendParenthesis('(')">(</button>
            <button class="button" onclick="appendParenthesis(')')">)</button>
        </div>
    </div>

    

    <script>
        let display = document.getElementById('display');
        let currentInput = '';

        function clearDisplay() {
            currentInput = '';
            display.innerText = '0';
        }

        function deleteLast() {
            currentInput = currentInput.slice(0, -1);
            display.innerText = currentInput || '0';
        }

        function appendNumber(number) {
            currentInput += number;
            display.innerText = currentInput;
        }

        function appendOperator(operator) {
            if (/[+\-*/]$/.test(currentInput)) {
                currentInput = currentInput.slice(0, -1) + operator;
            } else {
                currentInput += operator;
            }
            display.innerText = currentInput;
        }

        function appendParenthesis(parenthesis) {
            currentInput += parenthesis;
            display.innerText = currentInput;
        }

        function calculate() {
            try {
                currentInput = eval(currentInput).toString();
                display.innerText = currentInput;
            } catch (error) {
                display.innerText = 'Error';
            }
        }

        //Add text to screen when typing from a keyboard
        const body = document.getElementById("body");

        body.addEventListener("keydown", (e) => {
            if (e.key == "Shift" || e.key == "Meta" || e.key == "Alt" || e.key == "Escape" || e.key == "Tab" || e.key == "CapsLock" || e.key == "Control" || e.key == "ArrowUp" || e.key == "ArrowRight" || e.key == "ArrowDown" || e.key == "ArrowLeft") {
                
            } else if (e.key == "Backspace") {
                deleteLast()
            } else if (e.key == "Enter") {
                calculate()
            } else {
                appendNumber(e.key)
            }
        });
    </script>
</body>
</html>